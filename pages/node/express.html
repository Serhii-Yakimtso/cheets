<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Express</title>
    <link rel="stylesheet" href="../../css/reset.css" />
    <link rel="stylesheet" href="../../css/react.css" />
  </head>
  <body>
    <a class="print-home-link" href="../../index.html"
      >На головну</a
    >
    <h1 class="m-bottom center-text">Express</h1>

    <section class="m-bottom">
      <p class="m-bottom-min">
        <b>Express</b> - це популярна JavaScript бібліотека,
        яка призначена для розробки вебдодатків і API.
        Express побудований на базі Node.js і надає простий
        та ефективний спосіб створення серверних
        застосунків. Реалізує лише маршрутизацію (роутінг) і
        не має великої кількості вбудованих інструментів для
        розв'язання типових задач (логування, робота з базою
        даних, побудови архітектури, валідації запитів
        тощо).
      </p>

      <p>Express вирішує наступні завдання:</p>
      <ul>
        <li>
          <b>I/O (введення/виведення)</b>: всі програми, які
          взаємодіють з користувачем або зовнішніми
          системами, виконують введення та виведення даних.
          У веброзробці це означає отримання запитів від
          клієнтів та відправлення їм відповідей. Наприклад,
          коли користувач відкриває сторінку вашого
          вебсайту, його браузер надсилає запит на сервер, а
          сервер повертає сторінку або JSON-дані
          користувачеві. Express допомагає вирішувати ці
          завдання, обробляючи запити та відправляючи
          відповіді.
        </li>
        <li>
          <b>Маршрутизація запитів</b>: у веброзробці
          маршрутизація визначає, як сервер повинен
          реагувати на різні URL-шляхи та типи HTTP-запитів,
          такі як GET, POST, PUT, DELETE тощо. Наприклад,
          коли користувач відкриває головну сторінку вашого
          сайту (наприклад, http://example.com/), це
          викликає обробник, який повертає вміст головної
          сторінки. Коли користувач намагається
          зареєструватися на вашому сайті (наприклад,
          відправляє дані форми), це може викликати
          обробник, який додає нового користувача до бази
          даних. Express надає можливість визначати ці
          маршрути та обробники (request handler) для різних
          запитів.
        </li>
      </ul>
    </section>

    <!-- Створення вебсервісу -->
    <section class="m-bottom">
      <h2 class="m-bottom-min">Створення вебсервісу</h2>
      <div class="m-bottom-min print-flex-box">
        <div>
          <p>
            Щоб додати Express у Node.js додаток необхідно
            встановити відповідний NPM-пакет.
          </p>
        </div>
        <div class="bcg-box print-bcg-box">
          <p>npm install <b>express</b></p>
        </div>
      </div>

      <div class="m-bottom-min print-flex-box">
        <div>
          <p>Далі необхідно:</p>
          <ul class="list-style">
            <li>
              В корні проєкту створити папку <b>src</b>;
            </li>
            <li>
              В папці <b>src</b> створити файл
              <b>index.js</b>;
            </li>
            <li>
              <b>Імпортувати</b> функцію <b>express</b> з
              бібліотеки express
            </li>
            <li>
              Ініціалізувати Express-додаток (сервер)
              викликом функції <b>express()</b> і зберігти
              його у змінній <b>app</b>.
            </li>
          </ul>
        </div>
        <div class="bcg-box print-bcg-box">
          <p>
            <i>// src/index.js </i> <br />
            import express from 'express';<br />
            <br />
            const app = express();
          </p>
        </div>
      </div>

      <div class="m-bottom-min print-flex-box">
        <div>
          <p>
            Для запуску серверу потрібно викликати метод
            сервера <b>listen</b>, передавши йому:
          </p>
          <ul class="list-style">
            <li>
              <i>першим аргументом</i> <b>номер порту</b>,
              на якому ми хочемо його запустити (наприклад,
              3000)
            </li>
            <li>
              <i>другим аргументом</i>
              <b>колбек функцію</b>, що виконається, коли
              сервер <b>успішно запуститься</b>. Ця колбек
              функція може використовуватися для виведення
              повідомлення про те, що сервер працює і на
              якому порту він слухає запити.
            </li>
          </ul>
        </div>
        <div class="bcg-box print-bcg-box">
          <p>
            <i>// src/index.js </i> <br />
            import express from 'express';<br />
            <br />
            const app = express();<br />
            <br />
            const PORT = 3000;<br />
            <br />
            app.<b>listen</b>(<b
              >PORT, () => {<br />
                  console.log(`Server is running on port
              ${PORT}`</b
            >);<br />
            });
          </p>
        </div>
      </div>

      <div class="m-bottom-min">
        <p>
          Щоб сервер міг обробляти запити та відповідати на
          них, необхідно оголосити маршрути та їхні
          обробники (get, post, put, putch, delete).
          Маршрути вказують на конкретні шляхи, а обробники
          визначають, як реагувати на запити до цих шляхів.
        </p>
      </div>

      <div class="m-bottom-min print-flex-box">
        <div>
          <p>
            При оголошені маршруту та обробника для нього на
            сервері app потрібно викликати метод (наприклад,
            GET-запит), передавши йому:
          </p>
          <ul class="list-style">
            <li>
              <i>першим аргументом</i> — <b>шлях</b> до
              ресурсу (наприклад '/', що представляє
              кореневий маршрут сервісу)
            </li>
            <li>
              <i>другим аргументом</i> —
              <b>функцію-обробник</b> (request handler), яка
              виконується кожен раз, коли сервер отримує
              запит на вказаний шлях.
            </li>
          </ul>
        </div>
        <div class="bcg-box print-bcg-box">
          <p>
            app.<b>get('/', (req, res) => {</b><br />
                <i>// тіло функції-обробника</i><br />
            <b>})</b>;
          </p>
        </div>
      </div>

      <div class="m-bottom-min">
        <p>
          Функція-обробник оголошує два параметри, які
          Express передає їй автоматично під час виклику:
        </p>
        <ul>
          <li>
            <b>req</b> - перший параметр, який являє собою
            <b>об’єкт запиту</b> і містить повну інформацію
            про запит.
          </li>
          <li>
            <b>res</b> - другий параметр, який являє собою
            <b>об’єкт для формування відповіді</b>. Він має
            всі необхідні методи для додавання заголовків,
            тіла і багато іншого до відповіді.
          </li>
        </ul>
      </div>

      <div class="m-bottom-min print-flex-box">
        <div>
          <p>
            Для перевірки запиту (наприклад, get) можна
            перейти за маршрутом (наприклад,
            <b>localhost:3000</b> при маршруті <b>"/"</b>)
          </p>
        </div>
        <div class="bcg-box print-bcg-box">
          <p>
            app.get('/', (req, res) => {<br />
                console.log(req.url)<br />
                console.log(req.method)<br />
                res.send('&#60;h1>homepage&#60;/h1>')<br />
            });
          </p>
        </div>
      </div>

      <div class="print-flex-box">
        <div>
          <p>
            Щоб відправити відповідь у форматі JSON, у
            функції-обробника викликається метод
            <b>res.json</b>, передаючи йому аргументом
            <i
              >об'єкт, який має бути відправлений як
              відповідь</i
            >.
          </p>
        </div>
        <div class="bcg-box print-bcg-box">
          <p>
            <i>// src/index.js</i> <br />
            <br />
            import express from 'express';<br />
            <br />
            const PORT = 3000;<br />
            <br />
            const app = express();<br />
            <br />
            app.get('/', (req, res) => {<br />
                res.json({<br />
                    message: 'Hello world!',<br />
                });<br />
            }); app.listen(PORT, () => { console.log(`Server
            is running on ${PORT}`); });
          </p>
        </div>
      </div>
    </section>
  </body>
</html>
